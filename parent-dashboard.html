<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Command Center - Bedrock ELA Parent Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            color: #2c3e50;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .logo span {
            font-size: 2rem;
            margin-right: 10px;
        }
        
        .parent-info {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .welcome-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .family-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .overview-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .overview-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .overview-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .overview-label {
            color: #6c757d;
            font-size: 1rem;
        }
        
        .students-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
        }
        
        .section-title span {
            font-size: 2rem;
            margin-right: 15px;
        }
        
        .students-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .student-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .student-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .student-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .student-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .student-grade {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .student-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .mini-stat {
            text-align: center;
            background: white;
            padding: 12px;
            border-radius: 8px;
        }
        
        .mini-stat-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .mini-stat-label {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .student-progress {
            margin-bottom: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .student-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(240, 147, 251, 0.4);
        }
        
        .action-btn.secondary {
            background: #6c757d;
        }
        
        .daily-summary {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .curriculum-management {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .management-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .management-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .management-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
        }
        
        .management-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-needs-attention {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-excellent {
            background: #cce5ff;
            color: #004085;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            .students-grid {
                grid-template-columns: 1fr;
            }
            .family-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span>ğŸ”ï¸ğŸ</span>
                <div>
                    <div style="font-size: 1.2rem;">Bedrock ELA</div>
                    <div style="font-size: 0.8rem; opacity: 0.7;">Family Command Center</div>
                </div>
            </div>
            <div class="parent-info">
                <span style="margin-right: 10px;">ğŸ‘‘</span>
                <span>Dragon Keeper Dashboard</span>
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1 style="color: #2c3e50; margin-bottom: 10px;">Welcome to Your Family Command Center! ğŸ‘‘</h1>
            <p style="font-size: 1.1rem; color: #6c757d;">Monitor your little climbers' progress through the Norwegian mountains</p>
            <p style="margin-top: 15px; font-size: 0.9rem; background: #e3f2fd; padding: 15px; border-radius: 10px; border-left: 4px solid #2196f3;">
                <strong>ğŸ“š Offline Ready:</strong> Your entire curriculum works offline for uninterrupted learning anywhere!
            </p>
        </div>

        <!-- Family Overview Stats -->
        <div class="family-overview">
            <div class="overview-card">
                <span class="overview-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                <div class="overview-number">6</div>
                <div class="overview-label">Active Climbers</div>
            </div>
            
            <div class="overview-card">
                <span class="overview-icon">â°</span>
                <div class="overview-number">2.5</div>
                <div class="overview-label">Avg Hours Today</div>
            </div>
            
            <div class="overview-card">
                <span class="overview-icon">ğŸ”ï¸</span>
                <div class="overview-number">18</div>
                <div class="overview-label">Peaks Climbed</div>
            </div>
            
            <div class="overview-card">
                <span class="overview-icon">ğŸ”¥</span>
                <div class="overview-number">12</div>
                <div class="overview-label">Day Streak</div>
            </div>
        </div>

        <!-- Students Section -->
        <div class="students-section">
            <h2 class="section-title">
                <span>ğŸ²</span>
                Your Mountain Climbers
            </h2>
            
            <div class="students-grid">
                <!-- Emmett -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Emmett (6)</div>
                        <div class="student-grade">1st Grade</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">25</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">3</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">â­</div>
                            <div class="mini-stat-label">Great!</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>4/5 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 80%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <a href="1st-grade-lessons.html" class="action-btn">Current Lesson</a>
                        <button class="action-btn secondary">Messages</button>
                    </div>
                </div>

                <!-- Lucas -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Lucas (11)</div>
                        <div class="student-grade">4th Grade</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">45</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">2</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">ğŸ¯</div>
                            <div class="mini-stat-label">Focus</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>2/4 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 50%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <a href="4th-grade-lessons.html" class="action-btn">Current Lesson</a>
                        <button class="action-btn secondary">Messages</button>
                    </div>
                </div>

                <!-- Asher -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Asher (9)</div>
                        <div class="student-grade">3rd Grade</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">0</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">0</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">ğŸ’¤</div>
                            <div class="mini-stat-label">Not Started</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>0/4 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <button class="action-btn secondary">Coming Soon</button>
                        <button class="action-btn secondary">Remind</button>
                    </div>
                </div>

                <!-- Levi -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Levi (13)</div>
                        <div class="student-grade">6th Grade</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">35</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">1</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">ğŸš€</div>
                            <div class="mini-stat-label">Advanced</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>1/3 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 33%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <button class="action-btn secondary">Coming Soon</button>
                        <button class="action-btn secondary">Messages</button>
                    </div>
                </div>

                <!-- Riley -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Riley (14)</div>
                        <div class="student-grade">7th Grade</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">50</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">3</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">ğŸ‘‘</div>
                            <div class="mini-stat-label">Leader</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>3/3 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <button class="action-btn secondary">Coming Soon</button>
                        <button class="action-btn secondary">Messages</button>
                    </div>
                </div>

                <!-- Bryton -->
                <div class="student-card">
                    <div class="student-header">
                        <div class="student-name">ğŸ Bryton (16)</div>
                        <div class="student-grade">College Prep</div>
                    </div>
                    <div class="student-stats">
                        <div class="mini-stat">
                            <div class="mini-stat-number">60</div>
                            <div class="mini-stat-label">Min Today</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">2</div>
                            <div class="mini-stat-label">Peaks</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-number">ğŸ“</div>
                            <div class="mini-stat-label">Scholar</div>
                        </div>
                    </div>
                    <div class="student-progress">
                        <div class="progress-label">
                            <span>Daily Progress</span>
                            <span>2/3 quests</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 67%"></div>
                        </div>
                    </div>
                    <div class="student-actions">
                        <a href="student-dashboard.html" class="action-btn">View Dashboard</a>
                        <button class="action-btn secondary">Coming Soon</button>
                        <button class="action-btn secondary">Messages</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Daily Summary -->
        <div class="daily-summary">
            <h2 class="section-title">
                <span>ğŸ“Š</span>
                Today's Family Summary
            </h2>
            
            <div class="summary-grid">
                <div class="summary-item">
                    <div style="font-size: 2rem; margin-bottom: 10px;">â±ï¸</div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: #667eea;">3h 15m</div>
                    <div style="color: #6c757d;">Total Learning Time</div>
                </div>
                
                <div class="summary-item">
                    <div style="font-size: 2rem; margin-bottom: 10px;">âœ…</div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: #28a745;">15/22</div>
                    <div style="color: #6c757d;">Quests Completed</div>
                </div>
                
                <div class="summary-item">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ†</div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: #ffc107;">4</div>
                    <div style="color: #6c757d;">Kids on Track</div>
                </div>
                
                <div class="summary-item">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ¯</div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: #667eea;">68%</div>
                    <div style="color: #6c757d;">Daily Goal Progress</div>
                </div>
            </div>
        </div>

        <!-- Curriculum Management -->
        <div class="curriculum-management">
            <h2 class="section-title">
                <span>âš™ï¸</span>
                Curriculum Management
            </h2>
            
            <div class="management-grid">
                <div class="management-card">
                    <span class="management-icon">ğŸ“š</span>
                    <h3 style="margin-bottom: 10px;">Grade Levels</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Manage available curriculum by grade</p>
                    <div class="status-badge status-active">2 Active, 6 Coming Soon</div>
                </div>
                
                <div class="management-card">
                    <span class="management-icon">ğŸ¯</span>
                    <h3 style="margin-bottom: 10px;">Daily Goals</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Set learning time and quest targets</p>
                    <div class="status-badge status-excellent">All Set</div>
                </div>
                
                <div class="management-card">
                    <span class="management-icon">ğŸ“ˆ</span>
                    <h3 style="margin-bottom: 10px;">Progress Reports</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Weekly and monthly family reports</p>
                    <div class="status-badge status-active">Auto-Generated</div>
                </div>
                
                <div class="management-card">
                    <span class="management-icon">ğŸ“±</span>
                    <h3 style="margin-bottom: 10px;">Mobile Access</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Offline sync and mobile learning</p>
                    <div class="status-badge status-excellent">Ready</div>
                </div>
                
                <div class="management-card" onclick="manageStudents()" style="cursor: pointer;">
                    <span class="management-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                    <h3 style="margin-bottom: 10px;">Manage Students</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Add, edit, or remove student accounts</p>
                    <div class="status-badge status-needs-attention">Manage</div>
                </div>
                
                <div class="management-card" onclick="showDownloadOptions()" style="cursor: pointer;">
                    <span class="management-icon">ğŸ“¦</span>
                    <h3 style="margin-bottom: 10px;">Download Offline</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Download curriculum packages for offline learning</p>
                    <div class="status-badge status-excellent">Ready</div>
                </div>
                
                <div class="management-card" onclick="window.open('/offline-demo-lesson.html', '_blank')" style="cursor: pointer;">
                    <span class="management-icon">ğŸ¯</span>
                    <h3 style="margin-bottom: 10px;">Test Offline Limits</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Demo the 10-lesson offline limit system</p>
                    <div class="status-badge status-active">Demo</div>
                </div>
                
                <div class="management-card">
                    <span class="management-icon">ğŸ”„</span>
                    <h3 style="margin-bottom: 10px;">Backup & Sync</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Progress backup and device sync</p>
                    <div class="status-badge status-active">Auto-Sync On</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Add some interactivity
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Family Command Center loaded!');
            
            // Add click handlers for management cards
            const managementCards = document.querySelectorAll('.management-card');
            managementCards.forEach(card => {
                card.addEventListener('click', function() {
                    const title = this.querySelector('h3').textContent;
                    alert(`${title} settings coming soon! ğŸš€`);
                });
            });
        });
        
        // Real-time clock
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
            // Could update a time display if we add one
        }
        setInterval(updateTime, 1000);
        
        // Student management functionality
        async function manageStudents() {
            try {
                const students = window.bedrockStorage ? await bedrockStorage.getAllStudents() : [];
                showStudentManagementModal(students);
            } catch (error) {
                console.error('Failed to load students:', error);
                showStudentManagementModal([]);
            }
        }

        function showStudentManagementModal(students) {
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10000; overflow-y: auto;">
                    <div style="background: white; border-radius: 20px; padding: 30px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h2 style="margin: 0; color: #2c3e50;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Manage Students</h2>
                            <button onclick="this.parentNode.parentNode.parentNode.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">Ã—</button>
                        </div>
                        
                        <div id="studentsList">
                            ${students.length === 0 ? 
                                '<p style="color: #666; text-align: center; padding: 40px;">No students added yet. Create your first student account!</p>' :
                                students.map(student => createStudentCard(student)).join('')
                            }
                        </div>
                        
                        <div style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px; display: grid; gap: 10px;">
                            <button onclick="showAllLoginCredentials()" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 12px 30px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                ğŸ”‘ View All Login Credentials
                            </button>
                            <button onclick="addNewStudent()" style="background: linear-gradient(135deg, #32CD32 0%, #228B22 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                + Add New Student
                            </button>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 14px; color: #666;">
                            <strong>ğŸ’¡ Tips:</strong><br>
                            â€¢ Edit students to update grade levels as they grow<br>
                            â€¢ Archive students when they age out of BedrockELA<br>
                            â€¢ All progress is preserved when archiving
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function createStudentCard(student) {
            const lastActive = student.lastActive ? new Date(student.lastActive).toLocaleDateString() : 'Never';
            const gradeLevel = student.gradeLevel || 'Not set';
            const age = student.age || 'Not set';
            
            return `
                <div style="border: 2px solid #e9ecef; border-radius: 15px; padding: 20px; margin-bottom: 15px; background: #f8f9fa;">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 10px 0; color: #2c3e50; display: flex; align-items: center;">
                                <span style="font-size: 24px; margin-right: 10px;">ğŸ</span>
                                ${student.username}
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; font-size: 14px; color: #666;">
                                <div><strong>Grade:</strong> ${gradeLevel}</div>
                                <div><strong>Age:</strong> ${age}</div>
                                <div><strong>Active:</strong> ${lastActive}</div>
                                <div><strong>ID:</strong> ${student.id}</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="showLoginCredentials('${student.id}', '${student.username}')" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 8px; font-size: 12px; cursor: pointer;">
                                ğŸ”‘ Login Info
                            </button>
                            <button onclick="editStudent('${student.id}')" style="background: #4169E1; color: white; border: none; padding: 8px 15px; border-radius: 8px; font-size: 12px; cursor: pointer;">
                                âœï¸ Edit
                            </button>
                            <button onclick="archiveStudent('${student.id}', '${student.username}')" style="background: #ff9800; color: white; border: none; padding: 8px 15px; border-radius: 8px; font-size: 12px; cursor: pointer;">
                                ğŸ“¦ Archive
                            </button>
                            <button onclick="deleteStudent('${student.id}', '${student.username}')" style="background: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 8px; font-size: 12px; cursor: pointer;">
                                ğŸ—‘ï¸ Delete
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function addNewStudent() {
            const form = createStudentForm();
            showStudentForm(form, 'Add New Student', async (formData) => {
                if (window.bedrockStorage) {
                    const studentData = {
                        id: formData.username.toLowerCase().replace(/\s+/g, ''),
                        username: formData.username,
                        displayName: formData.displayName || formData.username,
                        gradeLevel: formData.gradeLevel,
                        age: parseInt(formData.age),
                        parentNotes: formData.parentNotes,
                        createdAt: new Date().toISOString()
                    };
                    
                    const success = await bedrockStorage.saveStudentProfile(studentData);
                    if (success) {
                        alert(`âœ… Student added: ${formData.username}`);
                        manageStudents(); // Refresh the list
                    } else {
                        alert('âŒ Failed to add student. Please try again.');
                    }
                } else {
                    alert('âŒ Storage not available. Please refresh and try again.');
                }
            });
        }

        async function showLoginCredentials(studentId, username) {
            try {
                const student = await bedrockStorage.getStudentProfile(studentId);
                if (!student) {
                    alert('âŒ Student not found');
                    return;
                }

                // Generate a simple password based on username (for demo purposes)
                // In production, you'd store actual passwords securely
                const generatedPassword = username.toLowerCase() + '123';
                const lastLogin = student.lastLogin ? new Date(student.lastLogin).toLocaleString() : 'Never';
                const loginUrl = window.location.origin + '/mountain-student-signin.html';

                const modal = document.createElement('div');
                modal.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10001;">
                        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                                <h2 style="margin: 0; color: #2c3e50;">ğŸ”‘ Login Credentials: ${username}</h2>
                                <button onclick="this.parentNode.parentNode.parentNode.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">Ã—</button>
                            </div>
                            
                            <div style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                                <div style="display: grid; gap: 15px;">
                                    <div>
                                        <label style="display: block; font-weight: bold; color: #495057; margin-bottom: 5px;">ğŸ‘¤ Username:</label>
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <code style="background: white; padding: 8px 12px; border-radius: 8px; border: 1px solid #dee2e6; font-size: 16px; flex: 1;">${username}</code>
                                            <button onclick="copyToClipboard('${username}')" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">ğŸ“‹ Copy</button>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; font-weight: bold; color: #495057; margin-bottom: 5px;">ğŸ” Password:</label>
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <code style="background: white; padding: 8px 12px; border-radius: 8px; border: 1px solid #dee2e6; font-size: 16px; flex: 1;">${generatedPassword}</code>
                                            <button onclick="copyToClipboard('${generatedPassword}')" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">ğŸ“‹ Copy</button>
                                        </div>
                                        <small style="color: #6c757d;">ğŸ’¡ Current system accepts any password - this is for reference</small>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; font-weight: bold; color: #495057; margin-bottom: 5px;">ğŸŒ Login URL:</label>
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <code style="background: white; padding: 8px 12px; border-radius: 8px; border: 1px solid #dee2e6; font-size: 12px; flex: 1; word-break: break-all;">${loginUrl}</code>
                                            <button onclick="copyToClipboard('${loginUrl}')" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">ğŸ“‹ Copy</button>
                                        </div>
                                    </div>
                                    
                                    <div style="border-top: 1px solid #dee2e6; padding-top: 15px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 14px; color: #6c757d;">
                                            <div><strong>Last Login:</strong><br>${lastLogin}</div>
                                            <div><strong>Student ID:</strong><br>${studentId}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; justify-content: center;">
                                <button onclick="window.open('${loginUrl}', '_blank')" style="background: #4169E1; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    ğŸš€ Test Login
                                </button>
                                <button onclick="resetStudentPassword('${studentId}', '${username}')" style="background: #ffc107; color: #333; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    ğŸ”„ Reset Password
                                </button>
                            </div>
                            
                            <div style="background: #e7f3ff; border: 1px solid #b8daff; border-radius: 10px; padding: 15px; margin-top: 20px; font-size: 14px;">
                                <h4 style="margin: 0 0 8px 0; color: #004085;">ğŸ›¡ï¸ Security Note:</h4>
                                <p style="margin: 0; color: #004085; line-height: 1.4;">
                                    Current system is demo-mode with simple authentication. 
                                    Any password works for any username. Perfect for family learning!
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            } catch (error) {
                alert('âŒ Error loading student credentials');
                console.error(error);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback
                const feedback = document.createElement('div');
                feedback.innerHTML = 'âœ… Copied!';
                feedback.style.cssText = `
                    position: fixed; 
                    top: 50%; 
                    left: 50%; 
                    transform: translate(-50%, -50%); 
                    background: #28a745; 
                    color: white; 
                    padding: 10px 20px; 
                    border-radius: 8px; 
                    z-index: 10002; 
                    font-weight: bold;
                `;
                document.body.appendChild(feedback);
                
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 1000);
            }).catch(() => {
                // Fallback for older browsers
                alert(`Copied: ${text}`);
            });
        }

        async function resetStudentPassword(studentId, username) {
            const newPassword = prompt(`ğŸ”„ Set new password for ${username}:\n\n(Leave blank to use default: ${username.toLowerCase()}123)`);
            
            if (newPassword !== null) {  // null means user cancelled
                const finalPassword = newPassword.trim() || username.toLowerCase() + '123';
                
                // In a real system, you'd update the password in the database
                // For now, just show confirmation
                alert(`ğŸ” Password updated for ${username}!\n\nNew password: ${finalPassword}\n\nâš ï¸ Note: This is demo mode - any password will work for login.`);
            }
        }

        async function showAllLoginCredentials() {
            try {
                const students = window.bedrockStorage ? await bedrockStorage.getAllStudents() : [];
                
                if (students.length === 0) {
                    alert('ğŸ“ No students found!\n\nAdd students first, then view their login credentials.');
                    return;
                }

                const loginUrl = window.location.origin + '/mountain-student-signin.html';
                const credentialsList = students.map(student => {
                    const password = student.username.toLowerCase() + '123';
                    const lastLogin = student.lastLogin ? new Date(student.lastLogin).toLocaleString() : 'Never';
                    
                    return `
                        <div style="border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; margin-bottom: 15px; background: #f8f9fa;">
                            <h4 style="margin: 0 0 10px 0; color: #2c3e50; display: flex; align-items: center;">
                                <span style="font-size: 20px; margin-right: 8px;">ğŸ</span>
                                ${student.username}
                                <span style="margin-left: auto; font-size: 12px; background: #6c757d; color: white; padding: 2px 8px; border-radius: 4px;">${student.gradeLevel || 'No grade'}</span>
                            </h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px; margin-top: 10px;">
                                <div>
                                    <strong>ğŸ‘¤ Username:</strong><br>
                                    <code style="background: white; padding: 4px 8px; border-radius: 4px; font-size: 13px;">${student.username}</code>
                                </div>
                                <div>
                                    <strong>ğŸ” Password:</strong><br>
                                    <code style="background: white; padding: 4px 8px; border-radius: 4px; font-size: 13px;">${password}</code>
                                </div>
                            </div>
                            <div style="margin-top: 8px; font-size: 12px; color: #6c757d;">
                                <strong>Last login:</strong> ${lastLogin}
                            </div>
                        </div>
                    `;
                }).join('');

                const modal = document.createElement('div');
                modal.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10001; overflow-y: auto;">
                        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 700px; width: 90%; max-height: 90vh; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                                <h2 style="margin: 0; color: #2c3e50;">ğŸ”‘ All Student Login Credentials</h2>
                                <button onclick="this.parentNode.parentNode.parentNode.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">Ã—</button>
                            </div>
                            
                            <div style="background: #e7f3ff; border: 1px solid #b8daff; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 8px 0; color: #004085;">ğŸŒ Student Login URL:</h4>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <code style="background: white; padding: 8px 12px; border-radius: 8px; border: 1px solid #dee2e6; font-size: 12px; flex: 1; word-break: break-all;">${loginUrl}</code>
                                    <button onclick="copyToClipboard('${loginUrl}')" style="background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">ğŸ“‹ Copy</button>
                                </div>
                            </div>
                            
                            <div style="max-height: 400px; overflow-y: auto;">
                                ${credentialsList}
                            </div>
                            
                            <div style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                                <button onclick="window.open('${loginUrl}', '_blank')" style="background: #4169E1; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    ğŸš€ Open Student Login
                                </button>
                                <button onclick="exportCredentials()" style="background: #17a2b8; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    ğŸ“„ Export as Text
                                </button>
                            </div>
                            
                            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px; padding: 15px; margin-top: 15px; font-size: 14px;">
                                <h4 style="margin: 0 0 8px 0; color: #856404;">ğŸ’¡ Quick Setup Tips:</h4>
                                <ul style="margin: 0; color: #856404; line-height: 1.4;">
                                    <li>Students just need their username - any password works</li>
                                    <li>Bookmark the student login page on their devices</li>
                                    <li>Works offline after first login (progress syncs later)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            } catch (error) {
                alert('âŒ Error loading student credentials');
                console.error(error);
            }
        }

        function exportCredentials() {
            bedrockStorage.getAllStudents().then(students => {
                const loginUrl = window.location.origin + '/mountain-student-signin.html';
                let exportText = `ğŸ“š BedrockELA Student Login Credentials\n`;
                exportText += `${'='.repeat(50)}\n\n`;
                exportText += `ğŸŒ Student Login URL: ${loginUrl}\n\n`;
                
                students.forEach((student, index) => {
                    const password = student.username.toLowerCase() + '123';
                    exportText += `${index + 1}. ${student.username}\n`;
                    exportText += `   ğŸ‘¤ Username: ${student.username}\n`;
                    exportText += `   ğŸ” Password: ${password}\n`;
                    exportText += `   ğŸ“š Grade: ${student.gradeLevel || 'Not set'}\n\n`;
                });
                
                exportText += `ğŸ’¡ Note: Current system accepts any password for any username.\n`;
                exportText += `ğŸ”ï¸ Perfect for family learning environment!\n`;
                
                // Create downloadable file
                const blob = new Blob([exportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'bedrockela-student-credentials.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('ğŸ“„ Credentials exported as text file!\n\nSave this file somewhere safe for easy reference.');
            });
        }

        async function editStudent(studentId) {
            try {
                const student = await bedrockStorage.getStudentProfile(studentId);
                if (!student) {
                    alert('âŒ Student not found');
                    return;
                }

                const form = createStudentForm(student);
                showStudentForm(form, `Edit Student: ${student.username}`, async (formData) => {
                    const updates = {
                        username: formData.username,
                        displayName: formData.displayName || formData.username,
                        gradeLevel: formData.gradeLevel,
                        age: parseInt(formData.age),
                        parentNotes: formData.parentNotes
                    };
                    
                    const success = await bedrockStorage.updateStudentProfile(studentId, updates);
                    if (success) {
                        alert(`âœ… Student updated: ${formData.username}`);
                        manageStudents(); // Refresh the list
                    } else {
                        alert('âŒ Failed to update student. Please try again.');
                    }
                });
            } catch (error) {
                alert('âŒ Error loading student data');
                console.error(error);
            }
        }

        async function archiveStudent(studentId, username) {
            const confirmed = confirm(`ğŸ“¦ Archive Student: ${username}?\n\nThis will:\nâ€¢ Remove them from active student list\nâ€¢ Preserve all their learning progress\nâ€¢ Allow you to restore them later if needed\n\nPerfect for students who have aged out but might return!`);
            
            if (confirmed) {
                try {
                    const success = await bedrockStorage.deleteStudentProfile(studentId, true); // true = archive progress
                    if (success) {
                        alert(`ğŸ“¦ ${username} has been archived!\n\nTheir progress is safely stored and can be restored if needed.`);
                        manageStudents(); // Refresh the list
                    } else {
                        alert('âŒ Failed to archive student. Please try again.');
                    }
                } catch (error) {
                    alert('âŒ Error archiving student');
                    console.error(error);
                }
            }
        }

        async function deleteStudent(studentId, username) {
            const confirmed = confirm(`âš ï¸ PERMANENTLY Delete Student: ${username}?\n\nThis will:\nâ€¢ Remove them from student list\nâ€¢ DELETE all their learning progress\nâ€¢ This action CANNOT be undone!\n\nConsider "Archive" instead to preserve their progress.\n\nAre you absolutely sure?`);
            
            if (confirmed) {
                const doubleConfirmed = confirm(`ğŸ›‘ FINAL WARNING!\n\nYou are about to PERMANENTLY DELETE:\nâ€¢ Student: ${username}\nâ€¢ All their progress and achievements\nâ€¢ All their offline lesson data\n\nThis CANNOT be undone!\n\nType the student's name to confirm, or click Cancel to use Archive instead.`);
                
                if (doubleConfirmed) {
                    try {
                        const success = await bedrockStorage.deleteStudentProfile(studentId, false); // false = delete progress
                        if (success) {
                            alert(`ğŸ—‘ï¸ ${username} has been permanently deleted.\n\nAll their data has been removed from the system.`);
                            manageStudents(); // Refresh the list
                        } else {
                            alert('âŒ Failed to delete student. Please try again.');
                        }
                    } catch (error) {
                        alert('âŒ Error deleting student');
                        console.error(error);
                    }
                }
            }
        }

        function createStudentForm(existingStudent = null) {
            const student = existingStudent || {};
            
            return `
                <form onsubmit="handleStudentFormSubmit(event)">
                    <div style="display: grid; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">Username *</label>
                            <input type="text" name="username" value="${student.username || ''}" required 
                                   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;"
                                   placeholder="e.g. EmmaClimber, MountainLuke">
                            <small style="color: #666;">Used for login - no spaces, simple characters only</small>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">Display Name</label>
                            <input type="text" name="displayName" value="${student.displayName || ''}"
                                   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;"
                                   placeholder="e.g. Emma Johnson, Luke">
                            <small style="color: #666;">Full name shown in progress reports</small>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">Grade Level</label>
                                <select name="gradeLevel" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                    <option value="">Select Grade</option>
                                    <option value="K" ${student.gradeLevel === 'K' ? 'selected' : ''}>Kindergarten</option>
                                    <option value="1st" ${student.gradeLevel === '1st' ? 'selected' : ''}>1st Grade</option>
                                    <option value="2nd" ${student.gradeLevel === '2nd' ? 'selected' : ''}>2nd Grade</option>
                                    <option value="3rd" ${student.gradeLevel === '3rd' ? 'selected' : ''}>3rd Grade</option>
                                    <option value="4th" ${student.gradeLevel === '4th' ? 'selected' : ''}>4th Grade</option>
                                    <option value="5th" ${student.gradeLevel === '5th' ? 'selected' : ''}>5th Grade</option>
                                    <option value="6th" ${student.gradeLevel === '6th' ? 'selected' : ''}>6th Grade</option>
                                    <option value="7th" ${student.gradeLevel === '7th' ? 'selected' : ''}>7th Grade</option>
                                    <option value="8th" ${student.gradeLevel === '8th' ? 'selected' : ''}>8th Grade</option>
                                    <option value="Graduated" ${student.gradeLevel === 'Graduated' ? 'selected' : ''}>Graduated</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">Age</label>
                                <input type="number" name="age" value="${student.age || ''}" min="3" max="18"
                                       style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;"
                                       placeholder="Age">
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">Parent Notes</label>
                            <textarea name="parentNotes" rows="3" 
                                      style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; resize: vertical;"
                                      placeholder="Learning goals, preferences, notes...">${student.parentNotes || ''}</textarea>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 25px; padding-top: 20px; border-top: 1px solid #eee;">
                        <button type="button" onclick="this.closest('[style*=\"position: fixed\"]').remove()" 
                                style="background: #6c757d; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">
                            Cancel
                        </button>
                        <button type="submit" style="background: linear-gradient(135deg, #32CD32 0%, #228B22 100%); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">
                            ${existingStudent ? 'Update Student' : 'Add Student'}
                        </button>
                    </div>
                </form>
            `;
        }

        function showStudentForm(formHTML, title, onSubmitCallback) {
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10001; overflow-y: auto;">
                    <div style="background: white; border-radius: 20px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
                        <h2 style="margin: 0 0 25px 0; color: #2c3e50;">${title}</h2>
                        ${formHTML}
                    </div>
                </div>
            `;
            
            // Store the callback for the form submission
            modal.submitCallback = onSubmitCallback;
            
            document.body.appendChild(modal);
        }

        window.handleStudentFormSubmit = function(event) {
            event.preventDefault();
            
            const form = event.target;
            const modal = form.closest('[style*="position: fixed"]');
            const formData = new FormData(form);
            
            const data = {
                username: formData.get('username'),
                displayName: formData.get('displayName'),
                gradeLevel: formData.get('gradeLevel'),
                age: formData.get('age'),
                parentNotes: formData.get('parentNotes')
            };
            
            // Validation
            if (!data.username.trim()) {
                alert('Username is required');
                return;
            }
            
            if (modal.submitCallback) {
                modal.submitCallback(data);
            }
            
            modal.remove();
        };
        
        // Download options functionality
        function showDownloadOptions() {
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10000;">
                    <div style="background: white; border-radius: 20px; padding: 40px; max-width: 600px; width: 90%;">
                        <h2 style="margin: 0 0 20px 0; color: #2c3e50;">ğŸ“¦ Download for Offline Learning</h2>
                        <p style="color: #666; margin-bottom: 25px;">Download curriculum packages to use anywhere - perfect for travel, remote areas, or when internet is unreliable!</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                            <button onclick="downloadGrade('1st')" style="background: #4169E1; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                ğŸ 1st Grade Package<br><small>Vowels & Reading (2.1 MB)</small>
                            </button>
                            <button onclick="downloadGrade('2nd')" style="background: #4169E1; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                ğŸ 2nd Grade Package<br><small>Phonics & Stories (1.8 MB)</small>
                            </button>
                            <button onclick="downloadGrade('3rd')" style="background: #4169E1; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                ğŸ 3rd Grade Package<br><small>Writing & Vocabulary (2.0 MB)</small>
                            </button>
                            <button onclick="downloadGrade('4th')" style="background: #4169E1; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                                ğŸ 4th Grade Package<br><small>Analysis & Critical Thinking (2.3 MB)</small>
                            </button>
                        </div>
                        
                        <div style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px; text-align: center;">
                            <button onclick="downloadGrade('complete')" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #333; border: none; padding: 20px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px;">
                                ğŸ’ Complete Curriculum Package<br><small>All grades + offline support (12.5 MB)</small>
                            </button>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 20px;">
                            <h4 style="margin: 0 0 10px 0; color: #4169E1;">âœ¨ Features:</h4>
                            <ul style="margin: 0; color: #666; font-size: 14px;">
                                <li>âœ… Works completely offline</li>
                                <li>âœ… Progress saved locally</li>
                                <li>âœ… Syncs when reconnected</li>
                                <li>âœ… Perfect for travel & remote learning</li>
                            </ul>
                        </div>
                        
                        <button onclick="this.parentNode.parentNode.remove()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 10px; margin-top: 20px; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function downloadGrade(grade) {
            alert(\`ğŸ”ï¸ Downloading \${grade} grade curriculum...\n\nThis feature creates offline packages that work anywhere:\nâ€¢ No internet required after download\nâ€¢ All lessons and activities included\nâ€¢ Progress tracking works offline\nâ€¢ Perfect for travel and remote learning!\n\nComing soon - full download functionality!\`);
        }
    </script>
</body>
</html>